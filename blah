#include <unistd.h>
#include <dirent.h>
#include "shell.h"

int main (int argc, char **argv)
{
	pid_t test;
	char *pid, *dir, *buf;
	int file;

	test = fork();
	if (test == 0)
		exit(0);
	pid = malloc(sizeof(long));
	dir = malloc(100);
	itoa(test, pid);
	strcat(dir, "/proc/");
	strcat(dir, pid);
	strcat(dir, "/stat");
	file = open(dir, O_RDONLY);
	buf = malloc(1024);
	read(file, buf, 1024);
	buf = strtok(buf, " ");
	buf = strtok(NULL, " ");
	buf = strtok(NULL, " ");
	buf = strtok(NULL, " ");
	printf("%s\n", buf);
	printf("%ld\n", getpid());
}
